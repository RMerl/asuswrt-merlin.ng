<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0,  user-scalable=no" />
    </head>

    <body>
        <div class="row justify-content-center">
            <div class="col-12 mb-3">
                <div class="page-title"><#VPN_Fusion#></div>
            </div>
        </div>
		<div class="row justify-content-center">
            <div class="col-12 col-xxl-10 mb-3">
				<div class="pt-2 h-100">
					<iframe id="settingsWindow" style="
						width: 98%; 
						height: 100vh;
						margin: 0 auto;
					"></iframe>
				</div>
			</div>
        </div>

		<script>
		</script>	
	</body>

	<script>
		var webWrapper = true;

		$("#settingsWindow")
			.attr({src: "/VPN/vpnc.html?current_theme=" + theme})
			.on("load", function(){
				$("#settingsWindow").contents().find("body").hide().css({"visibility":"visible"}).fadeIn();
                const sendThemeColorMessage = () => {
                    const theme = top.document.documentElement.getAttribute("data-asuswrt-theme");
                    const color = top.document.documentElement.getAttribute("data-asuswrt-color");
                    const iframe = document.getElementById("settingsWindow");
                    if (iframe) {
                        iframe.contentWindow.postMessage({theme, color}, "*");
                    }
                    window.parent.postMessage({theme, color}, "*");
                }
                sendThemeColorMessage();
			})

		window.addEventListener('message', event => {
			if (event.data.type === 'resize') {
				const iframe = document.getElementById('settingsWindow');
				if (iframe) {
                    const footer = (navigator.userAgent.match(/ASUSMultiSiteManager/) || navigator.userAgent.match(/ASUSExpertSiteManager/)) ? 100 : 20;
                    const iframeHeight = event.data.height + footer;
                    let headerHeight = 0;
                    if (document.querySelector('header')) {
                        headerHeight = document.querySelector('header').scrollHeight;
                    }
                    const windowHeight = top.window.innerHeight - headerHeight * 2 - footer;
                    iframe.style.height = `${Math.max(iframeHeight, windowHeight * 1.13)}px`
				}
			}
		});
	</script>
</html>
