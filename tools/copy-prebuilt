#!/bin/bash

# Copy model/SDK specific binary blobs from new GPL to development repo

#
# Usage: enter the new GPL directory then run this script.
#        Then run by specifying the model number as argument.
#        REPO will contain the location of your local repository

MODEL=$1
REPO=/home/merlin/amng

if [ "$MODEL" == "RT-AC88U" ] || [ "$MODEL" == "RT-AC3100" ] || [ "$MODEL" == "RT-AC5300" ]
then
	SDK="_7114"
	ARCH="_arm"
	HND=""

	cp release/src/router/ctf_arm/bcm_7114_gmac3/* $REPO/release/src/router/ctf_arm/bcm_7114_gmac3/
	cp release/src/router/wl_arm_7114/prebuilt/* $REPO/release/src/router/wl_arm_7114/prebuilt/$MODEL/
	cp release/src/router/envram_bin/envram$ARCH$SDK/* $REPO/release/src/router/envram_bin/envram$ARCH$SDK/
	cp release/src-rt-7.14.114.x/src/wl/exe/prebuilt/* $REPO/release/src-rt-7.14.114.x/src/wl/exe/prebuilt/
	cp -a release/src/router/tuxera/broadcom$ARCH$SDK/* $REPO/release/src/router/tuxera/broadcom$ARCH$SDK/

elif [ "$MODEL" == "RT-AC3200" ]
then
	SDK="_7"
	ARCH="_arm"
	HND=""

	cp release/src/router/ctf_arm/bcm7/* $REPO/release/src/router/ctf_arm/bcm7/
	cp release/src/router/wl_arm_7/prebuilt/* $REPO/release/src/router/wl_arm_7/prebuilt/
	cp release/src-rt-7.x.main/src/wl/exe/prebuilt/* $REPO/release/src-rt-7.x.main/src/wl/exe/prebuilt/
	cp -a release/src/router/tuxera/broadcom$ARCH$SDK/* $REPO/release/src/router/tuxera/broadcom$ARCH$SDK/

elif [ "$MODEL" == "RT-AC56U" ] || [ "$MODEL" == "RT-AC68U" ] || [ "$MODEL" == "RT-AC87U" ]
then
	SDK=""
	ARCH="_arm"
	HND=""

        cp release/src/router/ctf_arm/bcm6/* $REPO/release/src/router/ctf_arm/bcm6/
        cp release/src/router/wl_arm/prebuilt/* $REPO/release/src/router/wl_arm/prebuilt/$MODEL/
	cp release/src-rt-6.x.4708/wl/exe/prebuilt/* $REPO/release/src-rt-6.x.4708/wl/exe/prebuilt/
	cp -a release/src/router/tuxera/broadcom$ARCH$SDK/* $REPO/release/src/router/tuxera/broadcom$ARCH$SDK/

elif [ "$MODEL" == "RT-AC86U" ]
then
	SDK="_94908hnd"
	ARCH="_arm"
	HND="_hnd"

	cp release/src/router/hnd_extra/prebuilt/* $REPO/release/src/router/hnd_extra/prebuilt/
	cp release/src/router/envram_bin/envram$ARCH$SDK/* $REPO/release/src/router/envram_bin/envram$ARCH$SDK/
	cp release/src-rt-5.02hnd/wl/exe/prebuilt/* $REPO/release/src-rt-5.02hnd/wl/exe/prebuilt/
	cp release/src/router/rdpactl/prebuilt/* $REPO/release/src/router/rdpactl/prebuilt/
	cp release/src/router/pwrctl_lib/prebuilt/* $REPO/release/src/router/pwrctl_lib/prebuilt/
	cp release/src/router/bcm_flasher/prebuilt/* $REPO/release/src/router/bcm_flasher/prebuilt/
	cp release/src/router/bcmmcastctl/prebuilt/* $REPO/release/src/router/bcmmcastctl/prebuilt/
	cp release/src/router/bcmtm_lib/prebuilt/* $REPO/release/src/router/bcmtm_lib/prebuilt/
	cp release/src/router/pwrctl/prebuilt/* $REPO/release/src/router/pwrctl/prebuilt/
	cp release/src/router/ethswctl/prebuilt/* $REPO/release/src/router/ethswctl/prebuilt/
	cp release/src/router/wlcsm/prebuilt/* $REPO/release/src/router/wlcsm/prebuilt/
	cp release/src/router/fcctl_lib/prebuilt/* $REPO/release/src/router/fcctl_lib/prebuilt/
	cp release/src/router/hnd_extra/prebuilt/* $REPO/release/src/router/hnd_extra/prebuilt/
	cp release/src/router/swmdk/prebuilt/* $REPO/release/src/router/swmdk/prebuilt/
	cp release/src/router/vlanctl_lib/prebuilt/* $REPO/release/src/router/vlanctl_lib/prebuilt/
	cp release/src/router/mcpctl/prebuilt/* $REPO/release/src/router/mcpctl/prebuilt/
	cp release/src/router/dnsspoof/prebuilt/* $REPO/release/src/router/dnsspoof/prebuilt/
	cp release/src/router/stlport/prebuilt/* $REPO/release/src/router/stlport/prebuilt/
	cp release/src/router/tmctl/prebuilt/* $REPO/release/src/router/tmctl/prebuilt/
	cp release/src/router/mdk/prebuilt/* $REPO/release/src/router/mdk/prebuilt/
	cp release/src/router/ethctl/prebuilt/* $REPO/release/src/router/ethctl/prebuilt/
	cp release/src/router/appeventd/prebuilt/* $REPO/release/src/router/appeventd/prebuilt/
	cp release/src/router/bcm_boardctl/prebuilt/* $REPO/release/src/router/bcm_boardctl/prebuilt/
	cp release/src/router/mcpd/prebuilt/* $REPO/release/src/router/mcpd/prebuilt/
	cp release/src/router/prebuilt/* $REPO/release/src/router/prebuilt/
	cp release/src/router/ethswctl_lib/prebuilt/* $REPO/release/src/router/ethswctl_lib/prebuilt/
	cp release/src/router/bcmtm/prebuilt/* $REPO/release/src/router/bcmtm/prebuilt/
	cp release/src/router/bcm_flashutil/prebuilt/* $REPO/release/src/router/bcm_flashutil/prebuilt/
	cp release/src/router/ethctl_lib/prebuilt/* $REPO/release/src/router/ethctl_lib/prebuilt/
	cp release/src/router/bcm_boot_launcher/prebuilt/* $REPO/release/src/router/bcm_boot_launcher/prebuilt/
	cp release/src/router/bpmctl/prebuilt/* $REPO/release/src/router/bpmctl/prebuilt/
	cp release/src/router/vpmstats/prebuilt/* $REPO/release/src/router/vpmstats/prebuilt/
	cp release/src/router/wlan/util/prebuilt/* $REPO/release/src/router/wlan/util/prebuilt/
	cp release/src/router/wlan/nvram/prebuilt/* $REPO/release/src/router/wlan/nvram/prebuilt/
	cp release/src/router/bcmmcast/prebuilt/* $REPO/release/src/router/bcmmcast/prebuilt/
	cp release/src/router/vlanctl/prebuilt/* $REPO/release/src/router/vlanctl/prebuilt/
	cp release/src/router/fcctl/prebuilt/* $REPO/release/src/router/fcctl/prebuilt/
	cp release/src/router/tmctl_lib/prebuilt/* $REPO/release/src/router/tmctl_lib/prebuilt/
	cp release/src/router/bridgeutil/prebuilt/* $REPO/release/src/router/bridgeutil/prebuilt/
	cp release/src/router/eventd/prebuilt/* $REPO/release/src/router/eventd/prebuilt/
	cp -a release/src/router/tuxera/broadcom$ARCH$HND/* $REPO/release/src/router/tuxera/broadcom$ARCH$HND/

elif [ "$MODEL" == "RT-AX88U" ] || [ "$MODEL" == "RT-AX92U" ]
then
        SDK="_axhnd"
        ARCH="_arm"
        HND="_axhnd"

	cp release/src/router/lighttpd-1.4.39/prebuild/* $REPO/release/src/router/lighttpd-1.4.39/prebuild_arm_axhnd/
	cp release/src/router/dblog/daemon/prebuild/* $REPO/release/src/router/dblog/daemon/prebuild_arm_axhnd/
	cp release/src/router/dblog/commands/prebuild/* $REPO/release/src/router/dblog/commands/prebuild_arm_axhnd/
	cp release/src-rt-5.02axhnd/wl/exe/prebuilt/* $REPO/release/src-rt-5.02axhnd/wl/exe/prebuilt/
	cp -a release/src/router/tuxera/broadcom_arm_ax/* $REPO/release/src/router/tuxera/broadcom_arm_ax/

elif [ "$MODEL" == "RT-AX56U" ] || [ "$MODEL" == "RT-AX58U" ]
then
	SDK="_6750hnd"
	ARCH="_arm"
	HND="_6750hnd"

	cp release/src/router/lighttpd-1.4.39/prebuild/* $REPO/release/src/router/lighttpd-1.4.39/prebuild_arm_6750hnd/
	cp release/src/router/dblog/daemon/prebuild/* $REPO/release/src/router/dblog/daemon/prebuild_arm_6750hnd/
	cp release/src/router/dblog/commands/prebuild/* $REPO/release/src/router/dblog/commands/prebuild_arm_6750hnd/
	cp release/src-rt-5.02axhnd.675x/wl/exe/prebuilt/* $REPO/release/src-rt-5.02axhnd.675x/wl/exe/prebuilt/
	cp -a release/src/router/tuxera/broadcom_arm_ax_6750/* $REPO/release/src/router/tuxera/broadcom_arm_ax_6750/
else
	echo "Unrecognized model!"
	exit
fi


# Asuswrt prebuild (model-specific)
cp release/src/router/httpd/prebuild/* $REPO/release/src/router/httpd/prebuild/$MODEL
# Remove this if it exists, as we don't use the closed source version (specific to the AX branch)
rm $REPO/release/src/router/httpd/prebuild/$MODEL/httpd.o 2> /dev/null
cp release/src/router/rc/prebuild/* $REPO/release/src/router/rc/prebuild/$MODEL
cp release/src/router/shared/prebuild/* $REPO/release/src/router/shared/prebuild/$MODEL
cp release/src/router/sw-hw-auth/prebuild/* $REPO/release/src/router/sw-hw-auth/prebuild/$MODEL
cp release/src/router/amas-utils/prebuild/* $REPO/release/src/router/amas-utils/prebuild/$MODEL
cp release/src/router/cfg_mnt/prebuild/* $REPO/release/src/router/cfg_mnt/prebuild/$MODEL



# SDK-specific (like _arm_94908hnd)
# HND exceptions - these no longer exist
if [ "$HND" == "" ]
then
	cp release/src/router/et$ARCH$SDK/prebuilt/* $REPO/release/src/router/et$ARCH$SDK/prebuilt/
	cp release/src/router/emf$ARCH$SDK/*.o $REPO/release/src/router/emf$ARCH$SDK/
	cp release/src/router/emf$ARCH$SDK/emfconf/prebuilt/* $REPO/release/src/router/emf$ARCH$SDK/emfconf/prebuilt/
	cp release/src/router/emf$ARCH$SDK/igsconf/prebuilt/* $REPO/release/src/router/emf$ARCH$SDK/igsconf/prebuilt/
fi

# On AX these are in router-sysdep
if [ "$MODEL" != "RT-AX88U" ] && [ "$MODEL" != "RT-AX92U" ] && [ "$MODEL" != "RT-AX56U" ] && [ "$MODEL" != "RT-AX58U" ]
then
	cp release/src/router/acsd$ARCH$SDK/prebuilt/* $REPO/release/src/router/acsd$ARCH$SDK/prebuilt/
	cp release/src/router/eapd$ARCH$SDK/linux/prebuilt/* $REPO/release/src/router/eapd$ARCH$SDK/linux/prebuilt/
	cp -a release/src/router/libupnp$ARCH$SDK/* $REPO/release/src/router/libupnp$ARCH$SDK/
	cp release/src/router/nas$ARCH$SDK/nas/prebuilt/* $REPO/release/src/router/nas$ARCH$SDK/nas/prebuilt/
	cp release/src/router/wlconf$ARCH$SDK/prebuilt/* $REPO/release/src/router/wlconf$ARCH$SDK/prebuilt/
	cp release/src/router/wps$ARCH$SDK/prebuilt/* $REPO/release/src/router/wps$ARCH$SDK/prebuilt/
	cp release/src/router/wlceventd/prebuilt/* $REPO/release/src/router/wlceventd/prebuilt$ARCH$SDK/
	cp release/src/router/dhd_monitor/prebuilt/* $REPO/release/src/router/dhd_monitor/prebuilt$HND/
	cp release/src/router/dblog/daemon/prebuild/* $REPO/release/src/router/dblog/daemon/prebuild$ARCH$HND/
	cp release/src/router/dblog/commands/prebuild/* $REPO/release/src/router/dblog/commands/prebuild$ARCH$HND/
	cp release/src/router/lighttpd-1.4.39/prebuild/* $REPO/release/src/router/lighttpd-1.4.39/prebuild$HND/
fi

cp release/src/router/bwdpi_source/asus/prebuild/libbwdpi.so $REPO/release/src/router/bwdpi_source/asus/prebuild$ARCH$SDK/$MODEL/
cp release/src/router/bwdpi_source/asus/prebuild/hwinfo $REPO/release/src/router/bwdpi_source/asus/prebuild$ARCH$SDK/
cp release/src/router/bwdpi_source/asus_sql/prebuild/* $REPO/release/src/router/bwdpi_source/asus_sql/prebuild$ARCH$SDK
cp release/src/router/bwdpi_source/prebuild/* $REPO/release/src/router/bwdpi_source/prebuild$ARCH$SDK


cp release/src/router/aaews/prebuild/* $REPO/release/src/router/aaews/prebuild$ARCH$HND/
cp release/src/router/asusnatnl/natnl/prebuild/* $REPO/release/src/router/asusnatnl/natnl/prebuild$ARCH$HND/
cp -a release/src/router/cloudcheck/broadcom_arm/* $REPO/release/src/router/cloudcheck/broadcom_arm/
cp release/src/router/dropbox_client/prebuild/* $REPO/release/src/router/dropbox_client/prebuild$ARCH$HND/
cp release/src/router/ftpclient/prebuild/* $REPO/release/src/router/ftpclient/prebuild$ARCH$HND/
cp release/src/router/libasuslog/prebuild/* $REPO/release/src/router/libasuslog/prebuild$ARCH$HND/
cp release/src/router/protect_srv/prebuild/* $REPO/release/src/router/protect_srv/prebuild$ARCH$HND/
cp release/src/router/protect_srv/lib/prebuild/* $REPO/release/src/router/protect_srv/lib/prebuild$ARCH$HND/
cp release/src/router/sambaclient/prebuild/* $REPO/release/src/router/sambaclient/prebuild$ARCH$HND/
cp release/src/router/u2ec/prebuild/* $REPO/release/src/router/u2ec/prebuild$ARCH$HND/
cp release/src/router/wlc_nt/prebuild/* $REPO/release/src/router/wlc_nt/prebuild$ARCH$HND/
cp release/src/router/sysstate/log_daemon/prebuild/* $REPO/release/src/router/sysstate/log_daemon/prebuild$ARCH$HND/
cp release/src/router/sysstate/commands/prebuild/* $REPO/release/src/router/sysstate/commands/prebuild$ARCH$HND/
cp release/src/router/networkmap/prebuild/* $REPO/release/src/router/networkmap/prebuild$ARCH$SDK/
cp release/src/router/nt_center/prebuild/* $REPO/release/src/router/nt_center/prebuild$ARCH$HND/
cp release/src/router/nt_center/actMail/prebuild/* $REPO/release/src/router/nt_center/actMail/prebuild$ARCH$HND/
cp release/src/router/nt_center/lib/prebuild/* $REPO/release/src/router/nt_center/lib/prebuild$ARCH$HND/
cp release/src/router/wb/prebuild/* $REPO/release/src/router/wb/prebuild$ARCH$HND/
cp release/src/router/webdav_client/prebuild/* $REPO/release/src/router/webdav_client/prebuild$ARCH$HND/
cp release/src/router/asuswebstorage/prebuild/* $REPO/release/src/router/asuswebstorage/prebuild$ARCH$HND/
cp release/src/router/inotify/prebuild/* $REPO/release/src/router/inotify/prebuild$ARCH$HND/
cp release/src/router/libletsencrypt/prebuild/* $REPO/release/src/router/libletsencrypt/prebuild$ARCH$HND/
cp release/src/router/libbcm/prebuilt/* $REPO/release/src/router/libbcm/prebuilt$ARCH$HND/


# Model-specific
if [ "$MODEL" == "RT-AC88U" ]
then
	cp release/src/router/rtl_bin/prebuilt/* $REPO/release/src/router/rtl_bin/prebuilt/
fi

# Anything newer than SDK6
if [ "$SDK" != "" ]
then
	cp release/src/router/bsd/prebuilt/* $REPO/release/src/router/bsd/prebuilt$ARCH$SDK/
fi

